export default class Configuration { constructor(e, n, t, o, a, c, i) { this.authority = e, this.client_id = n, this.redirect_uri = t, this.post_logout_redirect_uri = o, this.response_type = a, this.scope = c, this.revokeAccessTokenOnSignout = i } } export function renderUI(e, n) { var t = new Oidc.UserManager(e), o = document.getElementsByTagName("HEAD")[0], a = document.createElement("link"); a.rel = "stylesheet", a.type = "text/css", a.href = "https://rawcdn.githack.com/LaoKYC/LaoKYC-JavaScript/021e553ad3372d0711e0d121ec2b65d19bdfd143/JsOidc/wwwroot/css/kyc-style.css"; var c = document.createElement("link"); c.rel = "stylesheet", c.type = "text/css", c.href = "//db.onlinewebfonts.com/c/aec907da6ddc0232418067ecacb324a2?family=Noto+Sans+Lao", o.appendChild(a), o.appendChild(c); var i = document.createElement("BUTTON"); i.style = "background: transparent; border: 0;"; var r = document.createElement("img"); r.style = "width: 180px;", r.src = "lo" === n ? "https://rawcdn.githack.com/LaoKYC/LaoKYC-JavaScript/021e553ad3372d0711e0d121ec2b65d19bdfd143/JsOidc/wwwroot/img/signin-lo.png" : "https://rawcdn.githack.com/LaoKYC/LaoKYC-JavaScript/021e553ad3372d0711e0d121ec2b65d19bdfd143/JsOidc/wwwroot/img/signin-en.png", i.appendChild(r); const d = document.getElementById("kyc-login"); d.appendChild(i); var s = document.createElement("div"); s.className = "modal"; var l = document.createElement("div"); l.className = "modal-content", s.appendChild(l), d.appendChild(s), i.onclick = function () { var e = document.createElement("span"); e.className = "close", e.innerHTML = "&times;", l.innerHTML = "", s.style.display = "block", l.appendChild(e); var o = document.createElement("INPUT"); o.setAttribute("type", "text"), o.className = "kyc-number"; var a = document.createElement("BUTTON"); a.className = "btnOtp", a.type = "button", "en" === n ? (a.innerHTML = "Request OTP", o.placeholder = "Phone number, Eg: 205xxxxxxx") : "lo" === n && (a.innerHTML = "ຂໍລະຫັດຜ່ານ OTP", o.placeholder = "ເບີໂທ, ຕົວຢ່າງ: 205xxxxxxx"); var c = document.createElement("div"); c.className = "kyc-form"; var i = document.createElement("div"); i.className = "imgcontainer"; var r = document.createElement("img"); r.className = "avatr", r.src = "https://rawcdn.githack.com/LaoKYC/LaoKYC-JavaScript/021e553ad3372d0711e0d121ec2b65d19bdfd143/JsOidc/wwwroot/img/banner.png", r.width = 100, i.appendChild(r); var d = document.createElement("div"); d.className = "kyc-container"; var p = document.createElement("LABEL"); p.innerHTML = "Authentication LaoKYC </br>", d.appendChild(p), d.appendChild(o), d.appendChild(a), c.appendChild(i), c.appendChild(d), l.appendChild(c), a.onclick = function () { t.signinRedirect({ extraQueryParams: { platform: "SPA", phone: o.value, needotp: "true" }, prompt: "login" }) }, e.onclick = function () { s.style.display = "none" } } } export function logout(e) { new Oidc.UserManager(e).signoutRedirect() } export function revoke(e) { new Oidc.UserManager(e).revokeAccessToken().then(function () { log("Access Token Revoked.") }).catch(function (e) { log(e) }) } export function renewToken(e) { new Oidc.UserManager(e).signinSilent().then(function () { log("silent renew success"), showTokens() }).catch(function (e) { log("silent renew error", e) }) } function log(e) { document.getElementById("response").innerText = "", Array.prototype.forEach.call(arguments, function (e) { e instanceof Error ? e = "Error: " + e.message : "string" != typeof e && (e = JSON.stringify(e, null, 2)), document.getElementById("response").innerText += e + "\r\n" }) } function display(e, n) { if (n && "string" == typeof n) try { n = JSON.parse(n) } catch (e) { } n && "string" != typeof n && (n = JSON.stringify(n, null, 2)), document.querySelector(e).textContent = n } window.location.hash && handleCallback(); export function showTokens(e, n) { new Oidc.UserManager(e).getUser().then(function (e) { e ? display(n, e) : log("Not logged in") }) } function handleCallback(e) { new Oidc.UserManager(e).signinRedirectCallback().then(function (e) { log(window.location.hash.substr(1).split("&").reduce(function (e, n) { var t = n.split("="); return e[t[0]] = t[1], e }, {})), showTokens(), window.history.replaceState({}, window.document.title, window.location.origin + window.location.pathname) }, function (e) { log(e) }) }